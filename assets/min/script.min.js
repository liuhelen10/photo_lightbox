function initializePage(){function e(){c=new LightboxHandler(document.getElementById("lightbox")),d=new PaginationHandler(document.getElementById("pagination"),f),a=document.getElementById("search-input"),b=document.getElementById("photo-grid");var e=document.getElementById("search-btn");a.focus(),e.addEventListener("click",h),a.addEventListener("keydown",g)}function f(a){h({page:a})}function g(a){a&&"keydown"===a.type&&13===a.keyCode&&h()}function h(b){b=b||{};var c="2a2a42163497badb56857f270528dd43",e=new XMLHttpRequest,f=["https://api.flickr.com/services/rest/","?method=flickr.photos.search","&format=json&nojsoncallback=1&media=photos&per_page=104","&api_key=",c,"&text=",a.value,"&page=",b.page||"1"].join("");i("Loading..."),d.hide(),e.onload=j,e.open("GET",f,!0),e.send()}function i(a){b.innerHTML=['<p class="type-italic">',a,"</p>"].join("")}function j(a){function f(a){for(var c,d,b=[],e=0;e<a.length;e++)c=a[e],d=g(c,e),b.push(d);return b}function g(a,b){var c=h(a);return{full_url:c+"_c.jpg",thumbnail_url:c+"_q.jpg",title:a.title,index:b}}function h(a){return["https://farm",a.farm,".staticflickr.com/",a.server,"/",a.id,"_",a.secret].join("")}var e,d=JSON.parse(a.target.response);return"ok"!==d.stat?void i("We're sorry, there was an error loading your photos"):(b.innerHTML="",e=f(d.photos.photo),c.setPhotosArray(e),void(e.length?k(e,d.photos):i("No results found")))}function k(a,b){for(var c=0;c<a.length;c++)l(a[c]);d.render(b.page,b.pages)}function l(a){function e(a){var b=a.target;c.open(b.getAttribute("data-index"))}var d=document.createElement("img");d.src=a.thumbnail_url,d.className="image-thumbnail clickable",d.setAttribute("alt",a.title),d.setAttribute("data-index",a.index),d.addEventListener("click",e),b.appendChild(d)}var c,d,a=null,b=null;document.addEventListener("DOMContentLoaded",e)}initializePage();
